<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AeroChat Lite</title>
    <style>
        body { background: #4facfe; font-family: monospace; font-size: 12px; }
        #box { background: white; height: 150px; overflow: auto; border: 1px solid #000; margin-bottom: 5px; padding: 2px; }
        input { font-size: 12px; width: 80%; }
    </style>
</head>
<body>
    <div style="background:#0055ff; color:white; padding:3px;">üåº Aero ICQ HTTP</div>
    <div id="box">–ù–∞–∂–º–∏ –û–±–Ω–æ–≤–∏—Ç—å...</div>
    
    <input type="text" id="m" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ">
    <button onclick="send()">OK</button>
    <button onclick="load()">–û–±–Ω–æ–≤–∏—Ç—å</button>

<script>
    // URL —Ç–≤–æ–µ–π –±–∞–∑—ã —Å –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º .json - —ç—Ç–æ –≤–∞–∂–Ω–æ!
    var url = "https://ple7-edit-v1-default-rtdb.europe-west1.firebasedatabase.app/messages.json";

    function load() {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", url, true);
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var data = JSON.parse(xhr.responseText);
                var out = "";
                for (var id in data) {
                    out += "<b>" + data[id].u + ":</b> " + data[id].m + "<br>";
                }
                document.getElementById('box').innerHTML = out;
            }
        };
        xhr.send();
    }

    function send() {
        var msg = document.getElementById('m').value;
        if(!msg) return;
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
        xhr.send(JSON.stringify({u: "User", m: msg}));
        document.getElementById('m').value = "";
        setTimeout(load, 1000); // –û–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É
    }
    
    // –ê–≤—Ç–æ-–∑–∞–≥—Ä—É–∑–∫–∞
    load();
</script>
</body>
</html>
